<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Poladent â€“ Sistema Completo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- CSS -->
<link rel="stylesheet" href="css/styles.css">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!-- LibrerÃ­as -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Firebase Config -->
<script src="firebase/config.js"></script>

<!-- JS principal -->
<script src="apps/app.js" defer></script>

</head>
<body>

<h1>ðŸ¦· Poladent ðŸ¦·</h1>

<!-- HOME -->
<div id="home" class="card">
  <button id="btnAdmin">Administrador</button>
  <button id="btnEmployee">Empleado</button>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin" class="card hidden">
  <h3>Administrador</h3>
  <input id="adminEmail" placeholder="Correo">
  <input id="adminPass" type="password" placeholder="ContraseÃ±a">
  <br>
  <button id="loginBtn">Entrar</button>
  <button id="backHomeBtn1">Volver</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="panel hidden">
  <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;margin-top:20px;">
    <h3>Panel Administrador</h3>
  </div>

  <!-- Agregar empleado -->
  <div class="card">
    <h4>Agregar empleado</h4>
    <input id="nombreEmpleado" placeholder="Nombre del empleado">
    <input id="pinEmpleado" placeholder="PIN del empleado">
    <input id="valorHoraEmpleado" type="number" placeholder="Valor hora ($)" min="0">
    <button id="guardarEmpleadoBtn">Guardar empleado</button>
  </div>

  <!-- Empleados registrados -->
  <div class="card">
    <h4 style="cursor:pointer;" onclick="toggleSection('listaEmpleados')">
      ðŸ‘¥ Empleados registrados â–¼
    </h4>
    <div id="listaEmpleados" style="max-height:300px; overflow:auto;"></div>
  </div>

  <!-- Resumen marcaciones -->
  <div class="card">
    <h4 style="cursor:pointer;" onclick="toggleSection('adminList')">
      Resumen de marcaciones â–¼
    </h4>
    <input type="date" id="filterDate">
    <select id="periodoResumen">
      <option value="diario">Diario</option>
      <option value="quincenal">Quincenal</option>
      <option value="mensual">Mensual</option>
    </select>
    <div id="adminList" style="max-height:300px; overflow:auto;"></div>
  </div>

  <!-- Notificaciones -->
  <div class="card">
    <h4 style="cursor:pointer;" onclick="toggleSection('notificaciones')">
      Notificaciones â–¼
    </h4>
    <div id="notificaciones" style="max-height:200px; overflow:auto;"></div>
    <button id="exportMarcBtn">Exportar Marcaciones</button>
    <button id="exportSalarioBtn">Exportar Salario</button>
  </div>

  <!-- GrÃ¡fico horas trabajadas -->
  <div class="card">
    <label>Desde: <input type="date" id="chartStart"></label>
    <label>Hasta: <input type="date" id="chartEnd"></label>

    <canvas id="horasChart" width="400" height="200"></canvas>

    <!-- ================= BLOQUE CÃLCULO DE PAGOS ================= -->
<hr style="margin:20px 0; border-color:#007bff;">
<div id="calculoPagos" style="padding:10px; background:#f0f8ff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1)">

  <h2 style="color:#007bff; margin-bottom:10px;">ðŸ’° Calcular Pagos de Empleados</h2>

  <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-bottom:10px;">
    <label for="empleadoFiltro"><strong>Empleado:</strong></label>
    <select id="empleadoFiltro" style="padding:5px; border-radius:5px; border:1px solid #ccc;">
      <option value="todos">Todos</option>
      <!-- AquÃ­ se pueden agregar dinÃ¡micamente los empleados si quieres -->
    </select>

    <label for="payStart"><strong>Desde:</strong></label>
    <input type="date" id="payStart" style="padding:5px; border-radius:5px; border:1px solid #ccc;">

    <label for="payEnd"><strong>Hasta:</strong></label>
    <input type="date" id="payEnd" style="padding:5px; border-radius:5px; border:1px solid #ccc;">

    <button onclick="calcularPagos()" style="background:#007bff; color:white; border:none; border-radius:5px; padding:5px 10px; cursor:pointer;">
      Calcular
    </button>
  </div>

  <div id="payResults" style="margin-top:15px; display:flex; flex-direction:column; gap:10px;">
    <!-- AquÃ­ aparecerÃ¡n las tarjetas de resultados -->
  </div>

</div>

    <div class="card">
  <h4>ðŸ’° CÃ¡lculo de pago por perÃ­odo</h4>
  <label>Desde: <input type="date" id="payStart"></label>
  <label>Hasta: <input type="date" id="payEnd"></label>
      
      <select id="empleadoFiltro">
  <option value="todos">Todos los empleados</option>
</select>
      
  <button onclick="calcularPagos()">Calcular pagos</button>
  <div id="payResults"></div>
</div>

    <h4 style="margin-top:15px;">ðŸ“Š GrÃ¡fico de horas trabajadas por empleado</h4>
  </div>

  <button id="logoutBtn">Salir</button>
</div>

<!-- EMPLEADO PANEL -->
<div id="employeePanel" class="card hidden">
  <div class="nombreGrande" id="empNombreGrande"></div>

  <input id="empPin" type="password" placeholder="Ingresa tu PIN">
  <br>

  <div id="employeeButtons" class="hidden">
    <button id="entradaBtn">Entrada</button>
    <button id="almuerzoSalidaBtn">Salida Almuerzo</button>
    <button id="almuerzoRegresoBtn">Regreso Almuerzo</button>
    <button id="salidaBtn">Salida</button>
  </div>

  <div id="empMsg" class="notice"></div>
  <button id="backHomeBtn2">Volver</button>
</div>

</body>
</html>
