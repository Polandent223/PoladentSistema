<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Poladent â€“ Sistema Completo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</head>

<body>

<h1>ðŸ¦· Poladent ðŸ¦·</h1>

<!-- HOME -->
<div id="home" class="card">
  <button onclick="goAdmin()">Administrador</button>
  <button onclick="goEmployee()">Empleado</button>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin" class="card hidden">
  <h3>Administrador</h3>
  <input id="adminEmail" placeholder="Correo">
  <input id="adminPass" type="password" placeholder="ContraseÃ±a">
  <br>
  <button onclick="loginAdmin()">Entrar</button>
  <button onclick="backHome()">Volver</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="panel hidden">
  <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px;margin-top:20px;">
  <h3>Panel Administrador</h3>
</div>
  
  <!-- Agregar empleado -->
  <div class="card">
    <h4>Agregar empleado</h4>
    <input id="nombreEmpleado" placeholder="Nombre del empleado">
    <input id="pinEmpleado" placeholder="PIN del empleado">
    <button onclick="agregarEmpleado()">Guardar empleado</button>
  </div>
    
<!-- columna derecha -->
<!-- Empleados registrados -->
<div class="card">
  <h4 style="cursor:pointer;" onclick="toggleSection('listaEmpleados')">
    ðŸ‘¥ Empleados registrados â–¼
  </h4>
  <div id="listaEmpleados" style="max-height:300px; overflow:auto;"></div>
</div>

<!-- Resumen marcaciones -->
<div class="card">
  <h4 style="cursor:pointer;" onclick="toggleSection('adminList')">
    Resumen de marcaciones â–¼
  </h4>
  <input type="date" id="filterDate" onchange="filterByDate()">
  <select id="periodoResumen" onchange="filterByDate()">
    <option value="diario">Diario</option>
    <option value="quincenal">Quincenal</option>
    <option value="mensual">Mensual</option>
  </select>
  <div id="adminList" style="max-height:300px; overflow:auto;"></div>
</div>

<!-- Notificaciones -->
<div class="card">
  <h4 style="cursor:pointer;" onclick="toggleSection('notificaciones')">
    Notificaciones â–¼
  </h4>
  <div id="notificaciones" style="max-height:200px; overflow:auto;"></div>
  <button onclick="exportExcelFiltro()">Exportar Marcaciones</button>
  <button onclick="exportExcelSalarialFiltro()">Exportar Salario</button>
</div>

<!-- GrÃ¡fico horas trabajadas -->
<div class="card">
  <label>Desde: <input type="date" id="chartStart" onchange="updateChart()"></label>
  <label>Hasta: <input type="date" id="chartEnd" onchange="updateChart()"></label>

  <canvas id="horasChart" width="400" height="200"></canvas>

  <h4 style="margin-top:15px;">ðŸ“Š GrÃ¡fico de horas trabajadas por empleado</h4>
</div>

<button onclick="logout()">Salir</button>
</div>

<!-- EMPLEADO PANEL -->
<div id="employeePanel" class="card hidden">
  <div class="nombreGrande" id="empNombreGrande"></div>

  <input id="empPin" type="password" placeholder="Ingresa tu PIN">
  <br>

  <div id="employeeButtons" class="hidden">
    <button onclick="mark('entrada')">Entrada</button>
    <button onclick="mark('almuerzo_salida')">Salida Almuerzo</button>
    <button onclick="mark('almuerzo_regreso')">Regreso Almuerzo</button>
    <button onclick="mark('salida')">Salida</button>
  </div>

  <div id="empMsg" class="notice"></div>
  <button onclick="backHome()">Volver</button>
</div>

<script src="./apps/app.js"></script>
</body>
</html>

